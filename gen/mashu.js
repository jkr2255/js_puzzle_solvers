!function(t){function n(e){if(r[e])return r[e].exports;var o=r[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,n),o.l=!0,o.exports}var r={};n.m=t,n.c=r,n.d=function(t,r,e){n.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:e})},n.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(r,"a",r),r},n.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},n.p="",n(n.s=43)}([function(t,n,r){"use strict";function e(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function o(t){var n=[],r=void 0===t?"undefined":i(t);if("string"===r)n=t.split(" ");else if("number"===r)n=[t];else{if("[object Array]"!==a.call(t))throw new TypeError;n=t.slice()}for(var e=0;e<n.length;++e){var o=+n[e];if(n[e]=o,(0|o)!==o)throw new RangeError("Only integers are accepted for constraints.")}n.sort(function(t,n){return 0===t&&0===n?0:0===t?1:0===n?-1:Math.abs(t)-Math.abs(n)});for(var u=0,s=0;s<n.length;++s)if(u<Math.abs(n[s])&&(u=Math.abs(n[s])),s<n.length-1&&0!==n[s]&&n[s]+n[s+1]===0)return{text:"",maxVar:0};for(;0===n[n.length-1];)n.pop();return n.push(0),{text:n.join(" "),maxVar:u}}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=Object.prototype.toString,u=function(){function t(){e(this,t),this.clear()}return t.prototype.clear=function(){this.textConstraints=[],this.maxVar=0},t.prototype.add=function(t){var n=o(t);return n.maxVar>0&&(this.textConstraints.push(n.text),this.maxVar<n.maxVar&&(this.maxVar=n.maxVar)),this},t.prototype.length=function(){return this.textConstraints.length},t.prototype.merge=function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var e=0;e<n.length;++e){for(var o=0;o<n[e].textConstraints.length;++o)this.textConstraints.push(n[e].textConstraints[o]);this.maxVar<n[e].maxVar&&(this.maxVar=n[e].maxVar)}return this},t.prototype.toDIMACS=function(){return"p cnf "+this.maxVar+" "+this.textConstraints.length+"\n"+this.textConstraints.join("\n")},t.merge=function(){var n=new t;return n.merge.apply(n,arguments),n},t}();t.exports=u},,function(t,n,r){"use strict";t.exports="function"==typeof Worker&&"function"==typeof Int32Array},function(t,n,r){"use strict";function e(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function o(t){return Math.round(1e6*t)/1e6}var i;i=performance&&performance.now?function(){return performance.now()}:Date.now?function(){return Date.now()}:function(){return(new Date).getTime()},t.exports=function(){function t(n){e(this,t),this.output=n}return t.prototype.start=function(){this.start_time=this.lap_time=i()},t.prototype.lap=function(t){var n=i();this.output(t+": "+o(n-this.lap_time)+" ms"),this.lap_time=n},t.prototype.finish=function(t){t&&this.lap(t),this.output("合計時間: "+o(this.lap_time-this.start_time)+" ms")},t}()},function(t,n,r){"use strict";function e(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}var o=r(0),i=function(){function t(){e(this,t)}return t.prototype.loadWorker=function(){this.worker=new Worker("gen/minisat_worker.js")},t.prototype.setListener=function(t){this.worker||this.loadWorker(),this.listener&&this.worker.removeEventListener("message",this.listener,!0),this.listener=function(n){var r=n.data.result,e=null,o="ERROR";r&&(e=r.split(" "),o=e.shift(),e=e.map(function(t){return+t})),t(o,e,n.data.stdout,n.data.stderr)},this.worker.addEventListener("message",this.listener,!0)},t.prototype.solve=function(t,n){var r=t.toDIMACS();this.setListener(n),this.worker.postMessage(r)},t.prototype.solve_loop=function(t,n){var r=this;this.setListener(function(e,i,a,u){var s=n(t,e,i,a,u);if(!1!==s){if(s instanceof o)return t=s,void r.worker.postMessage(s.toDIMACS());throw new TypeError}}),this.worker.postMessage(t.toDIMACS())},t}();t.exports=i},,function(t,n,r){"use strict";function e(t,n){var r=[];if((n=+n)<0||n>t.length)return[];if(0==n)return[[]];if(1==n)return t.map(function(t){return[t]});if(n==t.length-1){var i=function(){var n=void 0;for(n=0;n<t.length;++n)r.push(t.filter(function(t,r){return r!==n}));return{v:r}}();if("object"===(void 0===i?"undefined":o(i)))return i.v}var a=[].concat(t);if(n==t.length)return[a];for(;;){if(a.length===n){r.push(a);break}var u=[a.pop()],s=e(a,n-1),f=void 0;for(f=0;f<s.length;++f)r.push(s[f].concat(u))}return r}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};t.exports=e},function(t,n,r){"use strict";function e(t){return o.push(t),window.postMessage(i,"*"),null}var o=[],i="set_timeout_"+Math.random();window.addEventListener("message",function(t){t.source===window&&t.data===i&&(t.stopPropagation(),o.length>0&&o.shift()())},!0),t.exports=e},function(t,n){t.exports=jQuery},function(t,n){function r(t){var n=typeof t;return null!=t&&("object"==n||"function"==n)}t.exports=r},function(t,n,r){var e=r(11),o=e.Symbol;t.exports=o},function(t,n,r){var e=r(23),o="object"==typeof self&&self&&self.Object===Object&&self,i=e||o||Function("return this")();t.exports=i},,,function(t,n,r){function e(t){return null==t?void 0===t?s:u:f&&f in Object(t)?i(t):a(t)}var o=r(10),i=r(25),a=r(26),u="[object Null]",s="[object Undefined]",f=o?o.toStringTag:void 0;t.exports=e},function(t,n){function r(t){return null!=t&&"object"==typeof t}t.exports=r},function(t,n,r){function e(t){if(!i(t))return!1;var n=o(t);return n==u||n==s||n==a||n==f}var o=r(14),i=r(9),a="[object AsyncFunction]",u="[object Function]",s="[object GeneratorFunction]",f="[object Proxy]";t.exports=e},,,,,,function(t,n,r){"use strict";function e(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}var o=r(8);t.exports=function(){function t(n){var r=this;e(this,t),this.width=this.height=0,this.$field=o(n),this.values=[],this.$field.on("click.field","td",function(t){if(t.preventDefault(),!r.changeDisabled&&o.isFunction(r.changeFunc)){var n=t.target.dataset.pos.split("_"),e=n[0],i=n[1],a=r.getValue(e,i),u=r.changeFunc(a,!0,e,i);!1!==u&&r.setValue(e,i,u)}}),this.$field.on("contextmenu.field","td",function(t){if(t.preventDefault(),!r.changeDisabled&&o.isFunction(r.changeFunc)){var n=t.target.dataset.pos.split("_"),e=n[0],i=n[1],a=r.getValue(e,i),u=r.changeFunc(a,!1,e,i);!1!==u&&r.setValue(e,i,u)}})}return t.prototype.setSize=function(t,n){this.width=t,this.height=n,this.values=[],this.$field.empty();for(var r=0;r<n;++r){var e=o("<tr />");this.$field.append(e),this.values.push([]);for(var i=0;i<t;++i){o("<td />").attr("data-pos",i+"_"+r).appendTo(e),this.values[r].push("")}}return this},t.prototype.setValue=function(t,n,r){return this.$field.find("td[data-pos='"+t+"_"+n+"']").text(r),this.values[n][t]=r,this},t.prototype.getValue=function(t,n){return this.values[n][t]},t.prototype.eachCell=function(t){for(var n=0;n<this.height;++n)for(var r=0;r<this.width;++r)if(!1===t(this.values[n][r],r,n))return!1;return!0},t}()},function(t,n,r){(function(n){var r="object"==typeof n&&n&&n.Object===Object&&n;t.exports=r}).call(n,r(24))},function(t,n){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(r=window)}t.exports=r},function(t,n,r){function e(t){var n=a.call(t,s),r=t[s];try{t[s]=void 0;var e=!0}catch(t){}var o=u.call(t);return e&&(n?t[s]=r:delete t[s]),o}var o=r(10),i=Object.prototype,a=i.hasOwnProperty,u=i.toString,s=o?o.toStringTag:void 0;t.exports=e},function(t,n){function r(t){return o.call(t)}var e=Object.prototype,o=e.toString;t.exports=r},function(t,n){function r(t,n){return t===n||t!==t&&n!==n}t.exports=r},function(t,n,r){function e(t){return null!=t&&i(t.length)&&!o(t)}var o=r(16),i=r(29);t.exports=e},function(t,n){function r(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=e}var e=9007199254740991;t.exports=r},function(t,n,r){function e(t){var n=o(t),r=n%1;return n===n?r?n-r:n:0}var o=r(46);t.exports=e},,,,,,,,,,,,,function(t,n,r){"use strict";var e=r(8),o=r(22),i=r(2),a=r(3),u=r(0),s=r(4),f=r(7),c=r(6),p=r(44);e(function(){if(!i)return void alert("この環境ではJavaScriptの機能が不足していて、実行できません。");var t=new o("#field"),n=new s;n.loadWorker(),e("#make_field_btn").click(function(){var n=parseInt(e("#width").val(),10),r=parseInt(e("#height").val(),10);if(!(n>=2&&r>=2))return void alert("2×2以上で設定してください。");t.setSize(n,r)}),e("#make_field_btn").click(),t.changeFunc=function(t,n){if(n)switch(t){case"○":return"●";case"●":return"";default:return"○"}else switch(t){case"○":return"";case"●":return"○";default:return"●"}};var r=e("#indicator"),l=new a(function(t){return e("<p />").text(t).appendTo(r)});e("#solve_btn").click(function(){function r(t,n,r){var e=+t;if(n=+n,t<0||t>=h||n<0||n>=v)throw new RangeError;if(r){if(n===v-1)throw new RangeError;return v*(h-1)+h*n+e+1}if(t===h-1)throw new RangeError;return(h-1)*n+e+1}function o(t){var n=0,r=0;if((t=+t)<=0)throw new RangeError;return t<=v*(h-1)?(n=(t-1)%(h-1),r=(t-1-n)/(h-1),{x:n,y:r,is_vertical:!1}):(t-=v*(h-1),n=(t-1)%h,r=(t-1-n)/h,{x:n,y:r,is_vertical:!0})}function i(t,n){var e=[];return n>0&&e.push(r(t,n-1,!0)),n<v-1&&e.push(r(t,n,!0)),t>0&&e.push(r(t-1,n,!1)),t<h-1&&e.push(r(t,n,!1)),e}function a(n){f(function(){var r=[],e=void 0,i=void 0,a=void 0,u=void 0,s={3:"│",5:"┌",6:"└",9:"┐",10:"┘",12:"─"};for(a=0;a<v;++a)r.push(p(new Array(h),0));for(e in n){var f=o(e);i=f.x,a=f.y,u=f.is_vertical,u?(r[a][i]+=1,r[a+1][i]+=2):(r[a][i]+=4,r[a][i+1]+=8)}t.eachCell(function(n,e,o){"○"!==n&&"●"!==n&&t.setValue(e,o,s[r[o][e]]||"")})})}function s(n,r){var e={},a=[],u=0,s=!1;for(var f in n)e[f]||function(f){for(var c=[],p=o(f),l=p.x,h=p.y,v=p.is_vertical,d=f,y=void 0,g=void 0,m=!1,x=void 0,w=void 0,b=void 0;!e[d];){e[d]=!0,c.push(d),!m&&u<2&&("●"!==(x=t.getValue(l,h))&&"○"!==x||(m=!0,++u));var j=o(d);for(y=j.x,g=j.y,v=j.is_vertical,l!==y||h!==g?(l=y,h=g):v?(l=y,h=g+1):(l=y+1,h=g),w=i(l,h),b=0;b<w.length&&((x=w[b])==d||!n[x]);++b);d=+x}!m||u>=2?(s=!0,r.add(c.map(function(t){return-t}))):a.push(c)}(f);if(u>=2){s=!0;for(var c=0;c<a.length;++c)r.add(a[c].map(function(t){return-t}))}return s}var h=t.width,v=t.height;l.start();var d=new u,y=0;if(t.eachCell(function(t,n,e){var o=0,a=i(n,e);for(c(a,3).forEach(function(t){return void d.add([-t[0],-t[1],-t[2]])}),o=0;o<a.length;++o)d.add(a.map(function(t,n){return n==o?-t:t}));if("●"===t){++y;var u=[],s=[],f=[],p=[];for(e>1&&(u.push(r(n,e-1,!0)),s.push(r(n,e-2,!0))),e<v-2&&(u.push(r(n,e,!0)),s.push(r(n,e+1,!0))),n>1&&(f.push(r(n-1,e,!1)),p.push(r(n-2,e,!1))),n<h-2&&(f.push(r(n,e,!1)),p.push(r(n+1,e,!1))),d.add(u),d.add(f),o=0;o<u.length;++o)d.add([-u[o],s[o]]);for(o=0;o<f.length;++o)d.add([-f[o],p[o]])}else if("○"===t){++y;var l=[],g=[],m=-1,x=-1;for(o=0;o<=3;++o)m=n-2+o,x=e-2+o,m>=0&&m<h-1&&(g[o]=r(m,e,!1)),x>=0&&x<v-1&&(l[o]=r(n,x,!0));var w=l[1]&&l[2],b=g[1]&&g[2];if(!w&&!b)throw alert("角に白丸があって、線を引けません。"),new RangeError;w?b?(d.add([l[1],g[1]]),d.add([-l[1],l[2]]),d.add([-g[1],-l[2]])):(d.add(l[1]),d.add(l[2])):(d.add(g[1]),d.add(g[2])),l[0]&&l[3]&&d.add(l.map(function(t){return-t})),g[0]&&g[3]&&d.add(g.map(function(t){return-t}))}}),l.lap("立式"),0===y)return void alert("フィールドが空です。終了します。");var g=null;n.solve_loop(d,function(t,n,r){l.lap("ソルバー");var o={},i=0,u="SAT"!==n,f=void 0;if(r)for(f=0;f<r.length;++f)r[f]>0&&(i++,o[r[f]]=!0);a(o);var c=s(o,t);return l.lap("ループチェック"),g?u?(l.finish(),alert("一意解です。"),a(g),!1):c?t:(l.finish(),alert("別解が見つかりました。"),!1):u?(l.finish(),alert("解が見つかりませんでした。"),!1):c?t:e("#bypass_unique").is(":checked")?(l.finish(),!1):(g=o,t.add(Object.keys(o).map(function(t){return-t})),t)}),console.log(d)})})},function(t,n,r){function e(t,n,r,e){var a=null==t?0:t.length;return a?(r&&"number"!=typeof r&&i(t,n,r)&&(r=0,e=a),o(t,n,r,e)):[]}var o=r(45),i=r(51);t.exports=e},function(t,n,r){function e(t,n,r,e){var a=t.length;for(r=o(r),r<0&&(r=-r>a?0:a+r),e=void 0===e||e>a?a:o(e),e<0&&(e+=a),e=r>e?0:i(e);r<e;)t[r++]=n;return t}var o=r(30),i=r(49);t.exports=e},function(t,n,r){function e(t){if(!t)return 0===t?t:0;if((t=o(t))===i||t===-i){return(t<0?-1:1)*a}return t===t?t:0}var o=r(47),i=1/0,a=1.7976931348623157e308;t.exports=e},function(t,n,r){function e(t){if("number"==typeof t)return t;if(i(t))return a;if(o(t)){var n="function"==typeof t.valueOf?t.valueOf():t;t=o(n)?n+"":n}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(u,"");var r=f.test(t);return r||c.test(t)?p(t.slice(2),r?2:8):s.test(t)?a:+t}var o=r(9),i=r(48),a=NaN,u=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,f=/^0b[01]+$/i,c=/^0o[0-7]+$/i,p=parseInt;t.exports=e},function(t,n,r){function e(t){return"symbol"==typeof t||i(t)&&o(t)==a}var o=r(14),i=r(15),a="[object Symbol]";t.exports=e},function(t,n,r){function e(t){return t?o(i(t),0,a):0}var o=r(50),i=r(30),a=4294967295;t.exports=e},function(t,n){function r(t,n,r){return t===t&&(void 0!==r&&(t=t<=r?t:r),void 0!==n&&(t=t>=n?t:n)),t}t.exports=r},function(t,n,r){function e(t,n,r){if(!u(r))return!1;var e=typeof n;return!!("number"==e?i(r)&&a(n,r.length):"string"==e&&n in r)&&o(r[n],t)}var o=r(27),i=r(28),a=r(52),u=r(9);t.exports=e},function(t,n){function r(t,n){return!!(n=null==n?e:n)&&("number"==typeof t||o.test(t))&&t>-1&&t%1==0&&t<n}var e=9007199254740991,o=/^(?:0|[1-9]\d*)$/;t.exports=r}]);