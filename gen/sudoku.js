!function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=111)}({0:function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t){var e=[],n=void 0===t?"undefined":i(t);if("string"===n)e=t.split(" ");else if("number"===n)e=[t];else{if("[object Array]"!==a.call(t))throw new TypeError;e=t.slice()}for(var r=0;r<e.length;++r){var o=+e[r];if(e[r]=o,(0|o)!==o)throw new RangeError("Only integers are accepted for constraints.")}e.sort(function(t,e){return 0===t&&0===e?0:0===t?1:0===e?-1:Math.abs(t)-Math.abs(e)});for(var u=0,s=0;s<e.length;++s)if(u<Math.abs(e[s])&&(u=Math.abs(e[s])),s<e.length-1&&0!==e[s]&&e[s]+e[s+1]===0)return{text:"",maxVar:0};for(;0===e[e.length-1];)e.pop();return e.push(0),{text:e.join(" "),maxVar:u}}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=Object.prototype.toString,u=function(){function t(){r(this,t),this.clear()}return t.prototype.clear=function(){this.textConstraints=[],this.maxVar=0},t.prototype.add=function(t){var e=o(t);return e.maxVar>0&&(this.textConstraints.push(e.text),this.maxVar<e.maxVar&&(this.maxVar=e.maxVar)),this},t.prototype.length=function(){return this.textConstraints.length},t.prototype.merge=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var r=0;r<e.length;++r){for(var o=0;o<e[r].textConstraints.length;++o)this.textConstraints.push(e[r].textConstraints[o]);this.maxVar<e[r].maxVar&&(this.maxVar=e[r].maxVar)}return this},t.prototype.toDIMACS=function(){return"p cnf "+this.maxVar+" "+this.textConstraints.length+"\n"+this.textConstraints.join("\n")},t.merge=function(){var e=new t;return e.merge.apply(e,arguments),e},t}();t.exports=u},1:function(t,e){t.exports=riot},111:function(t,e,n){"use strict";var r=n(1),o=n(12);n(112),n(13);var i=n(2),a=n(3),u=n(4),s=n(0),c=n(6),d=n(5),f=n(7);o(function(){if(!i)return void alert("この環境ではJavaScriptの機能が不足していて、実行できません。");var t=r.mount("sudoku-field")[0],e=r.mount("indicator")[0],n=new a(e.log.bind(e)),o=new u;o.loadWorker(),document.getElementById("solve_btn").addEventListener("click",function(){function r(t,e,n){return 81*t+9*e+(n-0)}function i(t){var e=(t-1)%9+1,n=(t-e)/9;return[Math.floor(n/9),n%9,e]}e.clear(),n.start(),t.creating=!1,t.clearAnswer(),t.update();for(var a=new s,u=t.data,l=0;l<9;++l)for(var p=0;p<9;++p)u[l][p]&&a.add(r(l,p,+u[l][p]));for(var h=0;h<9;++h)for(var m=3*Math.floor(h/3),v=h%3*3,g=0;g<9;++g){for(var b=[],y=[],w=[],x=[],k=0;k<9;++k){var _=Math.floor(k/3),C=k%3;b[k]=r(h,g,k+1),y[k]=r(h,k,g+1),w[k]=r(k,h,g+1),x[k]=r(m+_,v+C,g+1)}a.add(b),a.add(y),a.add(w),a.add(x),c(b.map(function(t){return-t}),2).forEach(function(t){return a.add(t)}),c(y.map(function(t){return-t}),2).forEach(function(t){return a.add(t)}),c(w.map(function(t){return-t}),2).forEach(function(t){return a.add(t)}),c(x.map(function(t){return-t}),2).forEach(function(t){return a.add(t)})}n.lap("立式"),o.solve(a,function(e,r,s,c){function l(t){var e=d(9,9,"");return t.forEach(function(t){var n=i(t),r=n[0],o=n[1],a=n[2];e[r][o]=a}),e}if(n.lap("初回ソルバー"),"SAT"!==e)return void alert("解が見つかりませんでした。");var p=r.filter(function(t){return t>0}),h=l(p);t.update({data:h}),n.lap("出力"),a.add(p.map(function(t){return-t})),o.solve(a,function(e,r,i,s){if("SAT"!==e)return n.finish("別解チェック"),void alert("一意解です。");if(document.getElementById("others_reset").checked)return n.finish("別解チェック"),alert("別解があります。"),void t.update({data:u});n.lap("確定マスの抽出");var c=r.filter(function(t){return t>0&&-1!==p.indexOf(t)});a.add(c.map(function(t){return-t})),f(function(){return t.update({data:l(c)})}),o.solve_loop(a,function(e,r,o,i,u){return"UNSAT"===r?(n.finish("完了"),alert("別解があります。"),!1):(n.lap("確定マスの抽出"),c=o.filter(function(t){return t>0&&-1!==c.indexOf(t)}),f(function(){return t.update({data:l(c)})}),a.add(c.map(function(t){return-t})),a)})})})},!1)})},112:function(t,e,n){"use strict";n(1).tag2("sudoku-field",'<div class="control"> 操作モード： <label><input type="radio" name="creating" value="1" checked="{creating}" onchange="{onCreatingChange}" ref="creatingRadio"> 作問</label> <label><input type="radio" name="creating" value="0" checked="{!creating}" onchange="{onCreatingChange}"> 解答</label> <button type="button" onclick="{allClear}">全クリア</button> <button type="button" onclick="{clearAnswer}">解答をクリア</button> </div> <table> <tr each="{row, row_num in data}" class="{top: row_num % dimension === 0, bottom: (row_num + 1) % dimension === 0}"> <td each="{item, col_num in row}" class="{left: col_num % dimension === 0, right: (col_num + 1) % dimension === 0, question: isQuestion[row_num][col_num]}" data-row="{row_num}" data-col="{col_num}" onclick="{clicked}" oncontextmenu="{clear}">{item}</td> </tr> </table> <h3>パレット</h3> <table> <tr> <td each="{number in numbers}" data-number="{number}" onclick="{selectPalette}" class="{selected: selected == number}"> {number} </td> </tr> </table>','sudoku-field div.control,[data-is="sudoku-field"] div.control{ margin: 5px 0; } sudoku-field table,[data-is="sudoku-field"] table{ border-collapse: collapse; } sudoku-field td,[data-is="sudoku-field"] td{ width: 1.5em; height: 1.5em; border: 1px solid #000; vertical-align: middle; text-align: center; } sudoku-field tr.top td,[data-is="sudoku-field"] tr.top td{ border-top-width: 2px; } sudoku-field tr.bottom td,[data-is="sudoku-field"] tr.bottom td{ border-bottom-width: 2px; } sudoku-field td.left,[data-is="sudoku-field"] td.left{ border-left-width: 2px; } sudoku-field td.right,[data-is="sudoku-field"] td.right{ border-right-width: 2px; } sudoku-field td.selected,[data-is="sudoku-field"] td.selected{ background-color: #ffb; } sudoku-field td.question,[data-is="sudoku-field"] td.question{ font-weight: bold; color: #008; }',"",function(t){var e=this;e.dimension=3,e.creating=!0;for(var r=e.dimension*e.dimension,o=e.numbers=[],i=1;i<=r;++i)o.push(i);var a=n(5);e.data=t.data||a(r,r,""),e.isQuestion=t.isQuestion||a(r,r,!1),e.selected="",e.clicked=function(t){var n=t.target.dataset.row,r=t.target.dataset.col;!e.creating&&e.isQuestion[n][r]||e.selected&&(e.data[n][r]=e.selected,e.isQuestion[n][r]=e.creating)},e.selectPalette=function(t){t.item.number==e.selected?e.selected="":e.selected=t.item.number},e.clear=function(t){var n=t.target.dataset.row,r=t.target.dataset.col;!e.creating&&e.isQuestion[n][r]||(e.data[n][r]="",e.isQuestion[n][r]=!1,t.preventDefault())},e.onCreatingChange=function(t){e.creating=e.refs.creatingRadio.checked},e.allClear=function(){e.data=a(r,r,""),e.isQuestion=a(r,r,!1)},e.clearAnswer=function(){for(var t=0;t<r;++t)for(var n=0;n<r;++n)e.isQuestion[t][n]||(e.data[t][n]="")}})},12:function(t,e,n){"use strict";t.exports=function(t){return document.addEventListener("DOMContentLoaded",t,!1)}},13:function(t,e,n){"use strict";n(1).tag2("indicator",'<div class="indicator"> <p each="{mes in messages}">{mes}</p> </div>','indicator .indicator,[data-is="indicator"] .indicator{ height:4.5em; line-height:1.5; overflow-y:auto; border:1px solid #ccc; margin:20px; } indicator .indicator p,[data-is="indicator"] .indicator p{ margin:0 0.5em; }',"",function(t){var e=this,n=e.messages=[];e.log=function(t){n.push(t),e.update()},e.clear=function(){n.length=0,e.update()}})},2:function(t,e,n){"use strict";t.exports="function"==typeof Worker&&"function"==typeof Int32Array},3:function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t){return Math.round(1e6*t)/1e6}var i;i=performance&&performance.now?function(){return performance.now()}:Date.now?function(){return Date.now()}:function(){return(new Date).getTime()},t.exports=function(){function t(e){r(this,t),this.output=e}return t.prototype.start=function(){this.start_time=this.lap_time=i()},t.prototype.lap=function(t){var e=i();this.output(t+": "+o(e-this.lap_time)+" ms"),this.lap_time=e},t.prototype.finish=function(t){t&&this.lap(t),this.output("合計時間: "+o(this.lap_time-this.start_time)+" ms")},t}()},4:function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=n(0),i=function(){function t(){r(this,t)}return t.prototype.loadWorker=function(){this.worker=new Worker("gen/minisat_worker.js")},t.prototype.setListener=function(t){this.worker||this.loadWorker(),this.listener&&this.worker.removeEventListener("message",this.listener,!0),this.listener=function(e){var n=e.data.result,r=null,o="ERROR";n&&(r=n.split(" "),o=r.shift(),r=r.map(function(t){return+t})),t(o,r,e.data.stdout,e.data.stderr)},this.worker.addEventListener("message",this.listener,!0)},t.prototype.solve=function(t,e){var n=t.toDIMACS();this.setListener(e),this.worker.postMessage(n)},t.prototype.solve_loop=function(t,e){var n=this;this.setListener(function(r,i,a,u){var s=e(t,r,i,a,u);if(!1!==s){if(s instanceof o)return t=s,void n.worker.postMessage(s.toDIMACS());throw new TypeError}}),this.worker.postMessage(t.toDIMACS())},t}();t.exports=i},5:function(t,e,n){"use strict";t.exports=function(t,e,n){for(var r=[],o=0;o<e;++o){r.push([]);for(var i=0;i<t;++i)r[o].push(n)}return r}},6:function(t,e,n){"use strict";function r(t,e){var n=[];if((e=+e)<0||e>t.length)return[];if(0==e)return[[]];if(1==e)return t.map(function(t){return[t]});if(e==t.length-1){var i=function(){var e=void 0;for(e=0;e<t.length;++e)n.push(t.filter(function(t,n){return n!==e}));return{v:n}}();if("object"===(void 0===i?"undefined":o(i)))return i.v}var a=[].concat(t);if(e==t.length)return[a];for(;;){if(a.length===e){n.push(a);break}var u=[a.pop()],s=r(a,e-1),c=void 0;for(c=0;c<s.length;++c)n.push(s[c].concat(u))}return n}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};t.exports=r},7:function(t,e,n){"use strict";function r(t){return o.push(t),window.postMessage(i,"*"),null}var o=[],i="set_timeout_"+Math.random();window.addEventListener("message",function(t){t.source===window&&t.data===i&&(t.stopPropagation(),o.length>0&&o.shift()())},!0),t.exports=r}});