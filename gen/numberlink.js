!function t(n,e,r){function i(o,u){if(!e[o]){if(!n[o]){var c="function"==typeof require&&require;if(!u&&c)return c(o,!0);if(a)return a(o,!0);var s=new Error("Cannot find module '"+o+"'");throw s.code="MODULE_NOT_FOUND",s}var l=e[o]={exports:{}};n[o][0].call(l.exports,function(t){var e=n[o][1][t];return i(e?e:t)},l,l.exports,t,n,e,r)}return e[o].exports}for(var a="function"==typeof require&&require,o=0;o<r.length;o++)i(r[o]);return i}({1:[function(t,n,e){function r(t){var n=t?t.length:0;return n?t[n-1]:void 0}n.exports=r},{}],2:[function(t,n,e){n.exports=t("./forEach")},{"./forEach":4}],3:[function(t,n,e){function r(t,n,e){var r=u(t)?i:o;return n=a(n,e,3),r(t,n)}var i=t("../internal/arrayFilter"),a=t("../internal/baseCallback"),o=t("../internal/baseFilter"),u=t("../lang/isArray");n.exports=r},{"../internal/arrayFilter":7,"../internal/baseCallback":10,"../internal/baseFilter":12,"../lang/isArray":46}],4:[function(t,n,e){var r=t("../internal/arrayEach"),i=t("../internal/baseEach"),a=t("../internal/createForEach"),o=a(r,i);n.exports=o},{"../internal/arrayEach":6,"../internal/baseEach":11,"../internal/createForEach":29}],5:[function(t,n,e){function r(t,n,e){var r=u(t)?i:o;return n=a(n,e,3),r(t,n)}var i=t("../internal/arrayMap"),a=t("../internal/baseCallback"),o=t("../internal/baseMap"),u=t("../lang/isArray");n.exports=r},{"../internal/arrayMap":8,"../internal/baseCallback":10,"../internal/baseMap":19,"../lang/isArray":46}],6:[function(t,n,e){function r(t,n){for(var e=-1,r=t.length;++e<r&&n(t[e],e,t)!==!1;);return t}n.exports=r},{}],7:[function(t,n,e){function r(t,n){for(var e=-1,r=t.length,i=-1,a=[];++e<r;){var o=t[e];n(o,e,t)&&(a[++i]=o)}return a}n.exports=r},{}],8:[function(t,n,e){function r(t,n){for(var e=-1,r=t.length,i=Array(r);++e<r;)i[e]=n(t[e],e,t);return i}n.exports=r},{}],9:[function(t,n,e){function r(t,n){for(var e=-1,r=t.length;++e<r;)if(n(t[e],e,t))return!0;return!1}n.exports=r},{}],10:[function(t,n,e){function r(t,n,e){var r=typeof t;return"function"==r?void 0===n?t:o(t,n,e):null==t?u:"object"==r?i(t):void 0===n?c(t):a(t,n)}var i=t("./baseMatches"),a=t("./baseMatchesProperty"),o=t("./bindCallback"),u=t("../utility/identity"),c=t("../utility/property");n.exports=r},{"../utility/identity":54,"../utility/property":55,"./baseMatches":20,"./baseMatchesProperty":21,"./bindCallback":26}],11:[function(t,n,e){var r=t("./baseForOwn"),i=t("./createBaseEach"),a=i(r);n.exports=a},{"./baseForOwn":14,"./createBaseEach":27}],12:[function(t,n,e){function r(t,n){var e=[];return i(t,function(t,r,i){n(t,r,i)&&e.push(t)}),e}var i=t("./baseEach");n.exports=r},{"./baseEach":11}],13:[function(t,n,e){var r=t("./createBaseFor"),i=r();n.exports=i},{"./createBaseFor":28}],14:[function(t,n,e){function r(t,n){return i(t,n,a)}var i=t("./baseFor"),a=t("../object/keys");n.exports=r},{"../object/keys":51,"./baseFor":13}],15:[function(t,n,e){function r(t,n,e){if(null!=t){void 0!==e&&e in i(t)&&(n=[e]);for(var r=0,a=n.length;null!=t&&a>r;)t=t[n[r++]];return r&&r==a?t:void 0}}var i=t("./toObject");n.exports=r},{"./toObject":43}],16:[function(t,n,e){function r(t,n,e,u,c,s){return t===n?!0:null==t||null==n||!a(t)&&!o(n)?t!==t&&n!==n:i(t,n,r,e,u,c,s)}var i=t("./baseIsEqualDeep"),a=t("../lang/isObject"),o=t("./isObjectLike");n.exports=r},{"../lang/isObject":49,"./baseIsEqualDeep":17,"./isObjectLike":40}],17:[function(t,n,e){function r(t,n,e,r,p,b,y){var d=u(t),g=u(n),j=l,x=l;d||(j=v.call(t),j==s?j=f:j!=f&&(d=c(t))),g||(x=v.call(n),x==s?x=f:x!=f&&(g=c(n)));var m=j==f,w=x==f,k=j==x;if(k&&!d&&!m)return a(t,n,j);if(!p){var O=m&&h.call(t,"__wrapped__"),A=w&&h.call(n,"__wrapped__");if(O||A)return e(O?t.value():t,A?n.value():n,r,p,b,y)}if(!k)return!1;b||(b=[]),y||(y=[]);for(var _=b.length;_--;)if(b[_]==t)return y[_]==n;b.push(t),y.push(n);var L=(d?i:o)(t,n,e,r,p,b,y);return b.pop(),y.pop(),L}var i=t("./equalArrays"),a=t("./equalByTag"),o=t("./equalObjects"),u=t("../lang/isArray"),c=t("../lang/isTypedArray"),s="[object Arguments]",l="[object Array]",f="[object Object]",p=Object.prototype,h=p.hasOwnProperty,v=p.toString;n.exports=r},{"../lang/isArray":46,"../lang/isTypedArray":50,"./equalArrays":30,"./equalByTag":31,"./equalObjects":32}],18:[function(t,n,e){function r(t,n,e){var r=n.length,o=r,u=!e;if(null==t)return!o;for(t=a(t);r--;){var c=n[r];if(u&&c[2]?c[1]!==t[c[0]]:!(c[0]in t))return!1}for(;++r<o;){c=n[r];var s=c[0],l=t[s],f=c[1];if(u&&c[2]){if(void 0===l&&!(s in t))return!1}else{var p=e?e(l,f,s):void 0;if(!(void 0===p?i(f,l,e,!0):p))return!1}}return!0}var i=t("./baseIsEqual"),a=t("./toObject");n.exports=r},{"./baseIsEqual":16,"./toObject":43}],19:[function(t,n,e){function r(t,n){var e=-1,r=a(t)?Array(t.length):[];return i(t,function(t,i,a){r[++e]=n(t,i,a)}),r}var i=t("./baseEach"),a=t("./isArrayLike");n.exports=r},{"./baseEach":11,"./isArrayLike":36}],20:[function(t,n,e){function r(t){var n=a(t);if(1==n.length&&n[0][2]){var e=n[0][0],r=n[0][1];return function(t){return null==t?!1:t[e]===r&&(void 0!==r||e in o(t))}}return function(t){return i(t,n)}}var i=t("./baseIsMatch"),a=t("./getMatchData"),o=t("./toObject");n.exports=r},{"./baseIsMatch":18,"./getMatchData":34,"./toObject":43}],21:[function(t,n,e){function r(t,n){var e=u(t),r=c(t)&&s(n),h=t+"";return t=p(t),function(u){if(null==u)return!1;var c=h;if(u=f(u),(e||!r)&&!(c in u)){if(u=1==t.length?u:i(u,o(t,0,-1)),null==u)return!1;c=l(t),u=f(u)}return u[c]===n?void 0!==n||c in u:a(n,u[c],void 0,!0)}}var i=t("./baseGet"),a=t("./baseIsEqual"),o=t("./baseSlice"),u=t("../lang/isArray"),c=t("./isKey"),s=t("./isStrictComparable"),l=t("../array/last"),f=t("./toObject"),p=t("./toPath");n.exports=r},{"../array/last":1,"../lang/isArray":46,"./baseGet":15,"./baseIsEqual":16,"./baseSlice":24,"./isKey":38,"./isStrictComparable":41,"./toObject":43,"./toPath":44}],22:[function(t,n,e){function r(t){return function(n){return null==n?void 0:n[t]}}n.exports=r},{}],23:[function(t,n,e){function r(t){var n=t+"";return t=a(t),function(e){return i(e,t,n)}}var i=t("./baseGet"),a=t("./toPath");n.exports=r},{"./baseGet":15,"./toPath":44}],24:[function(t,n,e){function r(t,n,e){var r=-1,i=t.length;n=null==n?0:+n||0,0>n&&(n=-n>i?0:i+n),e=void 0===e||e>i?i:+e||0,0>e&&(e+=i),i=n>e?0:e-n>>>0,n>>>=0;for(var a=Array(i);++r<i;)a[r]=t[r+n];return a}n.exports=r},{}],25:[function(t,n,e){function r(t){return null==t?"":t+""}n.exports=r},{}],26:[function(t,n,e){function r(t,n,e){if("function"!=typeof t)return i;if(void 0===n)return t;switch(e){case 1:return function(e){return t.call(n,e)};case 3:return function(e,r,i){return t.call(n,e,r,i)};case 4:return function(e,r,i,a){return t.call(n,e,r,i,a)};case 5:return function(e,r,i,a,o){return t.call(n,e,r,i,a,o)}}return function(){return t.apply(n,arguments)}}var i=t("../utility/identity");n.exports=r},{"../utility/identity":54}],27:[function(t,n,e){function r(t,n){return function(e,r){var u=e?i(e):0;if(!a(u))return t(e,r);for(var c=n?u:-1,s=o(e);(n?c--:++c<u)&&r(s[c],c,s)!==!1;);return e}}var i=t("./getLength"),a=t("./isLength"),o=t("./toObject");n.exports=r},{"./getLength":33,"./isLength":39,"./toObject":43}],28:[function(t,n,e){function r(t){return function(n,e,r){for(var a=i(n),o=r(n),u=o.length,c=t?u:-1;t?c--:++c<u;){var s=o[c];if(e(a[s],s,a)===!1)break}return n}}var i=t("./toObject");n.exports=r},{"./toObject":43}],29:[function(t,n,e){function r(t,n){return function(e,r,o){return"function"==typeof r&&void 0===o&&a(e)?t(e,r):n(e,i(r,o,3))}}var i=t("./bindCallback"),a=t("../lang/isArray");n.exports=r},{"../lang/isArray":46,"./bindCallback":26}],30:[function(t,n,e){function r(t,n,e,r,a,o,u){var c=-1,s=t.length,l=n.length;if(s!=l&&!(a&&l>s))return!1;for(;++c<s;){var f=t[c],p=n[c],h=r?r(a?p:f,a?f:p,c):void 0;if(void 0!==h){if(h)continue;return!1}if(a){if(!i(n,function(t){return f===t||e(f,t,r,a,o,u)}))return!1}else if(f!==p&&!e(f,p,r,a,o,u))return!1}return!0}var i=t("./arraySome");n.exports=r},{"./arraySome":9}],31:[function(t,n,e){function r(t,n,e){switch(e){case i:case a:return+t==+n;case o:return t.name==n.name&&t.message==n.message;case u:return t!=+t?n!=+n:t==+n;case c:case s:return t==n+""}return!1}var i="[object Boolean]",a="[object Date]",o="[object Error]",u="[object Number]",c="[object RegExp]",s="[object String]";n.exports=r},{}],32:[function(t,n,e){function r(t,n,e,r,a,u,c){var s=i(t),l=s.length,f=i(n),p=f.length;if(l!=p&&!a)return!1;for(var h=l;h--;){var v=s[h];if(!(a?v in n:o.call(n,v)))return!1}for(var b=a;++h<l;){v=s[h];var y=t[v],d=n[v],g=r?r(a?d:y,a?y:d,v):void 0;if(!(void 0===g?e(y,d,r,a,u,c):g))return!1;b||(b="constructor"==v)}if(!b){var j=t.constructor,x=n.constructor;if(j!=x&&"constructor"in t&&"constructor"in n&&!("function"==typeof j&&j instanceof j&&"function"==typeof x&&x instanceof x))return!1}return!0}var i=t("../object/keys"),a=Object.prototype,o=a.hasOwnProperty;n.exports=r},{"../object/keys":51}],33:[function(t,n,e){var r=t("./baseProperty"),i=r("length");n.exports=i},{"./baseProperty":22}],34:[function(t,n,e){function r(t){for(var n=a(t),e=n.length;e--;)n[e][2]=i(n[e][1]);return n}var i=t("./isStrictComparable"),a=t("../object/pairs");n.exports=r},{"../object/pairs":53,"./isStrictComparable":41}],35:[function(t,n,e){function r(t,n){var e=null==t?void 0:t[n];return i(e)?e:void 0}var i=t("../lang/isNative");n.exports=r},{"../lang/isNative":48}],36:[function(t,n,e){function r(t){return null!=t&&a(i(t))}var i=t("./getLength"),a=t("./isLength");n.exports=r},{"./getLength":33,"./isLength":39}],37:[function(t,n,e){function r(t,n){return t="number"==typeof t||i.test(t)?+t:-1,n=null==n?a:n,t>-1&&t%1==0&&n>t}var i=/^\d+$/,a=9007199254740991;n.exports=r},{}],38:[function(t,n,e){function r(t,n){var e=typeof t;if("string"==e&&u.test(t)||"number"==e)return!0;if(i(t))return!1;var r=!o.test(t);return r||null!=n&&t in a(n)}var i=t("../lang/isArray"),a=t("./toObject"),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,u=/^\w*$/;n.exports=r},{"../lang/isArray":46,"./toObject":43}],39:[function(t,n,e){function r(t){return"number"==typeof t&&t>-1&&t%1==0&&i>=t}var i=9007199254740991;n.exports=r},{}],40:[function(t,n,e){function r(t){return!!t&&"object"==typeof t}n.exports=r},{}],41:[function(t,n,e){function r(t){return t===t&&!i(t)}var i=t("../lang/isObject");n.exports=r},{"../lang/isObject":49}],42:[function(t,n,e){function r(t){for(var n=c(t),e=n.length,r=e&&t.length,s=!!r&&u(r)&&(a(t)||i(t)),f=-1,p=[];++f<e;){var h=n[f];(s&&o(h,r)||l.call(t,h))&&p.push(h)}return p}var i=t("../lang/isArguments"),a=t("../lang/isArray"),o=t("./isIndex"),u=t("./isLength"),c=t("../object/keysIn"),s=Object.prototype,l=s.hasOwnProperty;n.exports=r},{"../lang/isArguments":45,"../lang/isArray":46,"../object/keysIn":52,"./isIndex":37,"./isLength":39}],43:[function(t,n,e){function r(t){return i(t)?t:Object(t)}var i=t("../lang/isObject");n.exports=r},{"../lang/isObject":49}],44:[function(t,n,e){function r(t){if(a(t))return t;var n=[];return i(t).replace(o,function(t,e,r,i){n.push(r?i.replace(u,"$1"):e||t)}),n}var i=t("./baseToString"),a=t("../lang/isArray"),o=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,u=/\\(\\)?/g;n.exports=r},{"../lang/isArray":46,"./baseToString":25}],45:[function(t,n,e){function r(t){return a(t)&&i(t)&&u.call(t,"callee")&&!c.call(t,"callee")}var i=t("../internal/isArrayLike"),a=t("../internal/isObjectLike"),o=Object.prototype,u=o.hasOwnProperty,c=o.propertyIsEnumerable;n.exports=r},{"../internal/isArrayLike":36,"../internal/isObjectLike":40}],46:[function(t,n,e){var r=t("../internal/getNative"),i=t("../internal/isLength"),a=t("../internal/isObjectLike"),o="[object Array]",u=Object.prototype,c=u.toString,s=r(Array,"isArray"),l=s||function(t){return a(t)&&i(t.length)&&c.call(t)==o};n.exports=l},{"../internal/getNative":35,"../internal/isLength":39,"../internal/isObjectLike":40}],47:[function(t,n,e){function r(t){return i(t)&&u.call(t)==a}var i=t("./isObject"),a="[object Function]",o=Object.prototype,u=o.toString;n.exports=r},{"./isObject":49}],48:[function(t,n,e){function r(t){return null==t?!1:i(t)?l.test(c.call(t)):a(t)&&o.test(t)}var i=t("./isFunction"),a=t("../internal/isObjectLike"),o=/^\[object .+?Constructor\]$/,u=Object.prototype,c=Function.prototype.toString,s=u.hasOwnProperty,l=RegExp("^"+c.call(s).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");n.exports=r},{"../internal/isObjectLike":40,"./isFunction":47}],49:[function(t,n,e){function r(t){var n=typeof t;return!!t&&("object"==n||"function"==n)}n.exports=r},{}],50:[function(t,n,e){function r(t){return a(t)&&i(t.length)&&!!C[F.call(t)]}var i=t("../internal/isLength"),a=t("../internal/isObjectLike"),o="[object Arguments]",u="[object Array]",c="[object Boolean]",s="[object Date]",l="[object Error]",f="[object Function]",p="[object Map]",h="[object Number]",v="[object Object]",b="[object RegExp]",y="[object Set]",d="[object String]",g="[object WeakMap]",j="[object ArrayBuffer]",x="[object Float32Array]",m="[object Float64Array]",w="[object Int8Array]",k="[object Int16Array]",O="[object Int32Array]",A="[object Uint8Array]",_="[object Uint8ClampedArray]",L="[object Uint16Array]",E="[object Uint32Array]",C={};C[x]=C[m]=C[w]=C[k]=C[O]=C[A]=C[_]=C[L]=C[E]=!0,C[o]=C[u]=C[j]=C[c]=C[s]=C[l]=C[f]=C[p]=C[h]=C[v]=C[b]=C[y]=C[d]=C[g]=!1;var S=Object.prototype,F=S.toString;n.exports=r},{"../internal/isLength":39,"../internal/isObjectLike":40}],51:[function(t,n,e){var r=t("../internal/getNative"),i=t("../internal/isArrayLike"),a=t("../lang/isObject"),o=t("../internal/shimKeys"),u=r(Object,"keys"),c=u?function(t){var n=null==t?void 0:t.constructor;return"function"==typeof n&&n.prototype===t||"function"!=typeof t&&i(t)?o(t):a(t)?u(t):[]}:o;n.exports=c},{"../internal/getNative":35,"../internal/isArrayLike":36,"../internal/shimKeys":42,"../lang/isObject":49}],52:[function(t,n,e){function r(t){if(null==t)return[];c(t)||(t=Object(t));var n=t.length;n=n&&u(n)&&(a(t)||i(t))&&n||0;for(var e=t.constructor,r=-1,s="function"==typeof e&&e.prototype===t,f=Array(n),p=n>0;++r<n;)f[r]=r+"";for(var h in t)p&&o(h,n)||"constructor"==h&&(s||!l.call(t,h))||f.push(h);return f}var i=t("../lang/isArguments"),a=t("../lang/isArray"),o=t("../internal/isIndex"),u=t("../internal/isLength"),c=t("../lang/isObject"),s=Object.prototype,l=s.hasOwnProperty;n.exports=r},{"../internal/isIndex":37,"../internal/isLength":39,"../lang/isArguments":45,"../lang/isArray":46,"../lang/isObject":49}],53:[function(t,n,e){function r(t){t=a(t);for(var n=-1,e=i(t),r=e.length,o=Array(r);++n<r;){var u=e[n];o[n]=[u,t[u]]}return o}var i=t("./keys"),a=t("../internal/toObject");n.exports=r},{"../internal/toObject":43,"./keys":51}],54:[function(t,n,e){function r(t){return t}n.exports=r},{}],55:[function(t,n,e){function r(t){return o(t)?i(t):a(t)}var i=t("../internal/baseProperty"),a=t("../internal/basePropertyDeep"),o=t("../internal/isKey");n.exports=r},{"../internal/baseProperty":22,"../internal/basePropertyDeep":23,"../internal/isKey":38}],56:[function(t,n,e){"use strict";function r(t){return t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t}var i=t("lodash/collection/map"),a=t("lodash/collection/filter");n.exports=function o(t,n){var e=[];if(n=+n,0>n||n>t.length)return[];if(0==n)return[[]];if(1==n)return i(t,function(t){return[t]});if(n==t.length-1){var u=function(){var n=void 0;for(n=0;n<t.length;++n)e.push(a(t,function(t,e){return e!==n}));return{v:e}}();if("object"===("undefined"==typeof u?"undefined":r(u)))return u.v}var c=[].concat(t);if(n==t.length)return[c];for(var s,l;;){if(c.length===n){e.push(c);break}s=[c.pop()],l=o(c,n-1);var f=void 0;for(f=0;f<l.length;++f)e.push(l[f].concat(s))}return e}},{"lodash/collection/filter":3,"lodash/collection/map":5}],57:[function(t,n,e){"use strict";n.exports="function"==typeof Worker&&"function"==typeof Int32Array},{}],58:[function(t,n,e){"use strict";function r(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}var i,a=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}();i=performance&&performance.now?function(){return performance.now()}:Date.now?function(){return Date.now()}:function(){return(new Date).getTime()},n.exports=function(){function t(n){r(this,t),this.output=n}return a(t,[{key:"start",value:function(){this.start_time=this.lap_time=i()}},{key:"lap",value:function(t){var n=i();this.output(t+": "+(n-this.lap_time)+" ms"),this.lap_time=n}},{key:"finish",value:function(t){t&&this.lap(t),this.output("合計時間: "+(this.lap_time-this.start_time)+" ms")}}]),t}()},{}],59:[function(t,n,e){(function(t){var e;e="undefined"!=typeof window?window.jQuery:"undefined"!=typeof t?t.jQuery:null,n.exports=function(){function t(t){this.$field=e(t),this.values=[],this.$field.on("click.field","td",function(t){return function(n){var r,i,a,o,u;n.preventDefault(),t.changeDisabled||e.isFunction(t.changeFunc)&&(i=n.target.dataset.pos.split("_"),o=i[0],u=i[1],a=t.getValue(o,u),r=t.changeFunc(a,!0,o,u),r!==!1&&t.setValue(o,u,r))}}(this)),this.$field.on("contextmenu.field","td",function(t){return function(n){var r,i,a,o,u;n.preventDefault(),t.changeDisabled||e.isFunction(t.changeFunc)&&(i=n.target.dataset.pos.split("_"),o=i[0],u=i[1],a=t.getValue(o,u),r=t.changeFunc(a,!1,o,u),r!==!1&&t.setValue(o,u,r))}}(this))}return t.prototype.width=0,t.prototype.height=0,t.prototype.changeFunc=null,t.prototype.changeDisabled=!1,t.prototype.setSize=function(t,n){var r,i,a,o,u,c,s,l;for(this.width=t,this.height=n,this.values=[],this.$field.empty(),l=a=0,u=n;u>=0?u>a:a>u;l=u>=0?++a:--a)for(i=e("<tr />"),this.$field.append(i),this.values.push([]),s=o=0,c=t;c>=0?c>o:o>c;s=c>=0?++o:--o)r=e("<td />"),r.attr("data-pos",s+"_"+l).appendTo(i),this.values[l].push("");return this},t.prototype.setValue=function(t,n,e){return this.$field.find("td[data-pos='"+t+"_"+n+"']").text(e),this.values[n][t]=e,this},t.prototype.getValue=function(t,n){return this.values[n][t]},t.prototype.eachCell=function(t){var n,e,r,i,a,o;for(o=n=0,r=this.height;r>=0?r>n:n>r;o=r>=0?++n:--n)for(a=e=0,i=this.width;i>=0?i>e:e>i;a=i>=0?++e:--e)if(t(this.values[o][a],a,o)===!1)return!1;return!0},t}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],60:[function(t,n,e){"use strict";function r(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function i(t){return t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t}function a(t){var n=[],e="undefined"==typeof t?"undefined":i(t);if("string"===e)n=t.split(" ");else if("number"===e)n=[t];else{if("[object Array]"!==u.call(t))throw new TypeError;n=t.slice()}for(var r=0;r<n.length;++r){var a=+n[r];if(n[r]=a,(0|a)!==a)throw new RangeError("Only integers are accepted for constraints.")}n.sort(function(t,n){return 0===t&&0===n?0:0===t?1:0===n?-1:Math.abs(t)-Math.abs(n)});for(var o=0,r=0;r<n.length;++r)if(o<Math.abs(n[r])&&(o=Math.abs(n[r])),r<n.length-1&&0!==n[r]&&n[r]+n[r+1]===0)return{text:"",maxVar:0};for(;0===n[n.length-1];)n.pop();return n.push(0),{text:n.join(" "),maxVar:o}}var o=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}(),u=Object.prototype.toString,c=function(){function t(){r(this,t),this.clear()}return o(t,[{key:"clear",value:function(){this.textConstraints=[],this.maxVar=0}},{key:"add",value:function(t){var n=a(t);return n.maxVar>0&&(this.textConstraints.push(n.text),this.maxVar<n.maxVar&&(this.maxVar=n.maxVar)),this}},{key:"length",value:function(){return this.textConstraints.length}},{key:"merge",value:function(){for(var t=arguments.length,n=Array(t),e=0;t>e;e++)n[e]=arguments[e];for(var r=0;r<n.length;++r){for(var i=0;i<n[r].textConstraints.length;++i)this.textConstraints.push(n[r].textConstraints[i]);this.maxVar<n[r].maxVar&&(this.maxVar=n[r].maxVar)}return this}},{key:"toDIMACS",value:function(){return"p cnf "+this.maxVar+" "+this.textConstraints.length+"\n"+this.textConstraints.join("\n")}}],[{key:"merge",value:function(){var n=new t;return n.merge.apply(n,arguments),n}}]),t}();n.exports=c},{}],61:[function(t,n,e){"use strict";function r(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}(),a=t("./sat_constraints"),o=t("lodash/collection/map"),u=function(){function t(){r(this,t)}return i(t,[{key:"loadWorker",value:function(){this.worker=new Worker("gen/minisat_worker.js")}},{key:"setListener",value:function(t){this.worker||this.loadWorker(),this.listener&&this.worker.removeEventListener("message",this.listener,!0),this.listener=function(n){var e=n.data.result,r=null,i="ERROR";e&&(r=e.split(" "),i=r.shift(),r=o(r,function(t){return+t})),t(i,r,n.data.stdout,n.data.stderr)},this.worker.addEventListener("message",this.listener,!0)}},{key:"solve",value:function(t,n){var e=t.toDIMACS();this.setListener(n),this.worker.postMessage(e)}},{key:"solve_loop",value:function(t,n){var e=this;this.setListener(function(r,i,o,u){var c=n(t,r,i,o,u);if(c!==!1){if(c instanceof a)return t=c,void e.worker.postMessage(c.toDIMACS());throw new TypeError}}),this.worker.postMessage(t.toDIMACS())}}]),t}();n.exports=u},{"./sat_constraints":60,"lodash/collection/map":5}],62:[function(t,n,e){(function(n){"use strict";function e(t){if(Array.isArray(t)){for(var n=0,e=Array(t.length);n<t.length;n++)e[n]=t[n];return e}return Array.from(t)}var r="undefined"!=typeof window?window.jQuery:"undefined"!=typeof n?n.jQuery:null,i=t("./lib/puzzle_field"),a=t("./lib/environment_check"),o=t("./lib/lap_timer"),u=t("./lib/sat_constraints"),c=t("lodash/collection/each"),s=t("./lib/sat_solver"),l=t("lodash/collection/filter"),f=t("lodash/collection/map"),p=t("./lib/combination");r(function(){if(!a)return void alert("この環境ではJavaScriptの機能が不足していて、実行できません。");var t=new i("#field"),n=[0],h=new s;h.loadWorker(),r("#make_field_btn").click(function(){var e,i;return i=parseInt(r("#width").val(),10),e=parseInt(r("#height").val(),10),i>=2&&e>=2?(t.setSize(i,e),void(n=[0])):void alert("2×2以上で設定してください。")}),r("#make_field_btn").click(),t.changeFunc=function(t,e){var r,i;if(i=+t,0!==i||e){for(r=e?1:-1,n[i]-=1;;)if(i+=r,!(2===n[i]&&i>0))break;return n[i]||(n[i]=0),n[i]+=1,i||""}};var v=r("#indicator"),b=new o(function(t){return r("<p />").text(t).appendTo(v)});r("#solve_btn").click(function(){function n(n,e,r){return(e*t.width+n)*o+r}function i(e,r,i){var a=[];return e>0&&a.push(n(e-1,r,i)),r>0&&a.push(n(e,r-1,i)),e<t.width-1&&a.push(n(e+1,r,i)),r<t.height-1&&a.push(n(e,r+1,i)),a}b.start();var a={},o=0;if(t.eachCell(function(t){t=+t,t&&(a[t]||(a[t]=0),a[t]+=1,t>o&&(o=t))}),0===o)return void alert("数字が1つもないので終了します。");for(var s in a){var v=a[s];if(2!==v)return void alert("数字は2つずつ入れてください。")}b.lap("条件チェック");var y=new u,d=new u;t.eachCell(function(t,r,a){var u=+t;if(u){for(var s=i(r,a,u),l=1;o>=l;++l){var f=n(r,a,l);l!=u&&(f=-f),y.add(f)}y.add(s);var h=p(s,2);c(h,function(t){return void y.add([-t[0],-t[1]])})}else!function(){var t=n(r,a,1),s=void 0,l=[];for(s=0;o>s;++s)l.push(t+s);for(c(p(l,2),function(t){return void y.add([-t[0],-t[1]])}),d.add(l),u=1;o>=u;++u){var f=i(r,a,u),h=p(f,3);switch(c(h,function(t){return void y.add([-t[0],-t[1],-t[2]])}),t=n(r,a,u),f.length){case 3:h=p(f,2);case 4:c(h,function(n){return void y.add([-t].concat(e(n)))});break;case 2:y.add([-t,f[0]]),y.add([-t,f[1]])}}}()}),b.lap("立式");var g=y;r("#initial_kansai").is(":checked")||(g=u.merge(y,d)),h.solve(g,function(n,e,i,a){if(b.lap("初回ソルバー"),"SAT"!==n)return void alert("解が見つかりませんでした。");var u,c,s,p,v,d=l(e,function(t){return t>0}),g=[],j=!1;for(d.length<t.width*t.height&&(alert("関西解です。"),j=!0),c=0;c<t.height;++c)g.push([]);for(s=0;s<d.length;++s)p=(d[s]-1)%o+1,c=Math.floor((d[s]-p)/o/t.width),u=(d[s]-p)/o-c*t.width,g[c][u]=p;var x={};for(x[3]="│",x[5]="┌",x[6]="└",x[9]="┐",x[10]="┘",x[12]="─",c=0,c=0;c<t.height;++c)for(u=0;u<t.width;++u)p=g[c][u],p?(v=0,u>0&&g[c][u-1]==p&&(v+=8),u<t.width-1&&g[c][u+1]==p&&(v+=4),c>0&&g[c-1][u]==p&&(v+=2),c<t.height-1&&g[c+1][u]==p&&(v+=1),x[v]&&t.setValue(u,c,x[v])):t.setValue(u,c,"");return console.log(g),b.lap("出力"),j?void b.finish():void(r("#bypass_unique").is(":checked")||(y.add(f(d,function(t){return-t})),h.solve(y,function(t,n,e,r){b.finish("別解チェック"),alert("SAT"===t?"別解があります。":"一意解です。")})))})})})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./lib/combination":56,"./lib/environment_check":57,"./lib/lap_timer":58,"./lib/puzzle_field":59,"./lib/sat_constraints":60,"./lib/sat_solver":61,"lodash/collection/each":2,"lodash/collection/filter":3,"lodash/collection/map":5}]},{},[62]);
