!function(t){function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}var e={};n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},n.p="",n(n.s=54)}({0:function(t,n,e){"use strict";function r(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function o(t){var n=[],e=void 0===t?"undefined":i(t);if("string"===e)n=t.split(" ");else if("number"===e)n=[t];else{if("[object Array]"!==a.call(t))throw new TypeError;n=t.slice()}for(var r=0;r<n.length;++r){var o=+n[r];if(n[r]=o,(0|o)!==o)throw new RangeError("Only integers are accepted for constraints.")}n.sort(function(t,n){return 0===t&&0===n?0:0===t?1:0===n?-1:Math.abs(t)-Math.abs(n)});for(var s=0,u=0;u<n.length;++u)if(s<Math.abs(n[u])&&(s=Math.abs(n[u])),u<n.length-1&&0!==n[u]&&n[u]+n[u+1]===0)return{text:"",maxVar:0};for(;0===n[n.length-1];)n.pop();return n.push(0),{text:n.join(" "),maxVar:s}}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=Object.prototype.toString,s=function(){function t(){r(this,t),this.clear()}return t.prototype.clear=function(){this.textConstraints=[],this.maxVar=0},t.prototype.add=function(t){var n=o(t);return n.maxVar>0&&(this.textConstraints.push(n.text),this.maxVar<n.maxVar&&(this.maxVar=n.maxVar)),this},t.prototype.length=function(){return this.textConstraints.length},t.prototype.merge=function(){for(var t=arguments.length,n=Array(t),e=0;e<t;e++)n[e]=arguments[e];for(var r=0;r<n.length;++r){for(var o=0;o<n[r].textConstraints.length;++o)this.textConstraints.push(n[r].textConstraints[o]);this.maxVar<n[r].maxVar&&(this.maxVar=n[r].maxVar)}return this},t.prototype.toDIMACS=function(){return"p cnf "+this.maxVar+" "+this.textConstraints.length+"\n"+this.textConstraints.join("\n")},t.merge=function(){var n=new t;return n.merge.apply(n,arguments),n},t}();t.exports=s},2:function(t,n,e){"use strict";t.exports="function"==typeof Worker&&"function"==typeof Int32Array},22:function(t,n,e){"use strict";function r(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}var o=e(8);t.exports=function(){function t(n){var e=this;r(this,t),this.width=this.height=0,this.$field=o(n),this.values=[],this.$field.on("click.field","td",function(t){if(t.preventDefault(),!e.changeDisabled&&o.isFunction(e.changeFunc)){var n=t.target.dataset.pos.split("_"),r=n[0],i=n[1],a=e.getValue(r,i),s=e.changeFunc(a,!0,r,i);!1!==s&&e.setValue(r,i,s)}}),this.$field.on("contextmenu.field","td",function(t){if(t.preventDefault(),!e.changeDisabled&&o.isFunction(e.changeFunc)){var n=t.target.dataset.pos.split("_"),r=n[0],i=n[1],a=e.getValue(r,i),s=e.changeFunc(a,!1,r,i);!1!==s&&e.setValue(r,i,s)}})}return t.prototype.setSize=function(t,n){this.width=t,this.height=n,this.values=[],this.$field.empty();for(var e=0;e<n;++e){var r=o("<tr />");this.$field.append(r),this.values.push([]);for(var i=0;i<t;++i){o("<td />").attr("data-pos",i+"_"+e).appendTo(r),this.values[e].push("")}}return this},t.prototype.setValue=function(t,n,e){return this.$field.find("td[data-pos='"+t+"_"+n+"']").text(e),this.values[n][t]=e,this},t.prototype.getValue=function(t,n){return this.values[n][t]},t.prototype.eachCell=function(t){for(var n=0;n<this.height;++n)for(var e=0;e<this.width;++e)if(!1===t(this.values[n][e],e,n))return!1;return!0},t}()},3:function(t,n,e){"use strict";function r(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function o(t){return Math.round(1e6*t)/1e6}var i;i=performance&&performance.now?function(){return performance.now()}:Date.now?function(){return Date.now()}:function(){return(new Date).getTime()},t.exports=function(){function t(n){r(this,t),this.output=n}return t.prototype.start=function(){this.start_time=this.lap_time=i()},t.prototype.lap=function(t){var n=i();this.output(t+": "+o(n-this.lap_time)+" ms"),this.lap_time=n},t.prototype.finish=function(t){t&&this.lap(t),this.output("合計時間: "+o(this.lap_time-this.start_time)+" ms")},t}()},4:function(t,n,e){"use strict";function r(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}var o=e(0),i=function(){function t(){r(this,t)}return t.prototype.loadWorker=function(){this.worker=new Worker("gen/minisat_worker.js")},t.prototype.setListener=function(t){this.worker||this.loadWorker(),this.listener&&this.worker.removeEventListener("message",this.listener,!0),this.listener=function(n){var e=n.data.result,r=null,o="ERROR";e&&(r=e.split(" "),o=r.shift(),r=r.map(function(t){return+t})),t(o,r,n.data.stdout,n.data.stderr)},this.worker.addEventListener("message",this.listener,!0)},t.prototype.solve=function(t,n){var e=t.toDIMACS();this.setListener(n),this.worker.postMessage(e)},t.prototype.solve_loop=function(t,n){var e=this;this.setListener(function(r,i,a,s){var u=n(t,r,i,a,s);if(!1!==u){if(u instanceof o)return t=u,void e.worker.postMessage(u.toDIMACS());throw new TypeError}}),this.worker.postMessage(t.toDIMACS())},t}();t.exports=i},54:function(t,n,e){"use strict";var r=e(8),o=e(22),i=e(2),a=e(3),s=e(0),u=e(4),f=e(6);r(function(){if(!i)return void alert("この環境ではJavaScriptの機能が不足していて、実行できません。");var t=new o("#field"),n=[0],e=new u;e.loadWorker(),r("#make_field_btn").click(function(){var e=parseInt(r("#width").val(),10),o=parseInt(r("#height").val(),10);if(!(e>=2&&o>=2))return void alert("2×2以上で設定してください。");t.setSize(e,o),n=[0]}),r("#make_field_btn").click(),t.changeFunc=function(t,e){var r=+t;if(0!==r||e){var o=e?1:-1;for(n[r]-=1;r+=o,2===n[r]&&r>0;);return n[r]||(n[r]=0),n[r]+=1,r||""}};var c=r("#indicator"),h=new a(function(t){return r("<p />").text(t).appendTo(c)});r("#solve_btn").click(function(){function n(n,e,r){return(e*t.width+n)*a+r}function o(e,r,o){var i=[];return e>0&&i.push(n(e-1,r,o)),r>0&&i.push(n(e,r-1,o)),e<t.width-1&&i.push(n(e+1,r,o)),r<t.height-1&&i.push(n(e,r+1,o)),i}h.start();var i={},a=0;if(t.eachCell(function(t){(t=+t)&&(i[t]||(i[t]=0),i[t]+=1,a<t&&(a=t))}),0===a)return void alert("数字が1つもないので終了します。");for(var u in i){if(2!==i[u])return void alert("数字は2つずつ入れてください。")}h.lap("条件チェック");var c=new s,l=new s;t.eachCell(function(t,e,r){var i=+t;if(i){for(var s=o(e,r,i),u=1;u<=a;++u){var h=n(e,r,u);u!=i&&(h=-h),c.add(h)}c.add(s),f(s,2).forEach(function(t){return void c.add([-t[0],-t[1]])})}else!function(){var t=n(e,r,1),s=void 0,u=[];for(s=0;s<a;++s)u.push(t+s);for(f(u,2).forEach(function(t){return void c.add([-t[0],-t[1]])}),l.add(u),i=1;i<=a;++i){var h=o(e,r,i),p=f(h,3);switch(p.forEach(function(t){return void c.add([-t[0],-t[1],-t[2]])}),t=n(e,r,i),h.length){case 3:p=f(h,2);case 4:p.forEach(function(n){return void c.add([-t].concat(n))});break;case 2:c.add([-t,h[0]]),c.add([-t,h[1]])}}}()}),h.lap("立式");var p=c;r("#initial_kansai").is(":checked")||(p=s.merge(c,l)),e.solve(p,function(n,o,i,s){if(h.lap("初回ソルバー"),"SAT"!==n)return void alert("解が見つかりませんでした。");var u=o.filter(function(t){return t>0}),f=[],l=!1,p=void 0,d=void 0,v=void 0,y=void 0,g=void 0;for(u.length<t.width*t.height&&(alert("関西解です。"),l=!0),d=0;d<t.height;++d)f.push([]);for(v=0;v<u.length;++v)y=(u[v]-1)%a+1,d=Math.floor((u[v]-y)/a/t.width),p=(u[v]-y)/a-d*t.width,f[d][p]=y;var m={};for(m[3]="│",m[5]="┌",m[6]="└",m[9]="┐",m[10]="┘",m[12]="─",d=0,d=0;d<t.height;++d)for(p=0;p<t.width;++p)y=f[d][p],y?(g=0,p>0&&f[d][p-1]==y&&(g+=8),p<t.width-1&&f[d][p+1]==y&&(g+=4),d>0&&f[d-1][p]==y&&(g+=2),d<t.height-1&&f[d+1][p]==y&&(g+=1),m[g]&&t.setValue(p,d,m[g])):t.setValue(p,d,"");if(console.log(f),h.lap("出力"),l)return void h.finish();r("#bypass_unique").is(":checked")||(c.add(u.map(function(t){return-t})),e.solve(c,function(t,n,e,r){h.finish("別解チェック"),alert("SAT"===t?"別解があります。":"一意解です。")}))})})})},6:function(t,n,e){"use strict";function r(t,n){var e=[];if((n=+n)<0||n>t.length)return[];if(0==n)return[[]];if(1==n)return t.map(function(t){return[t]});if(n==t.length-1){var i=function(){var n=void 0;for(n=0;n<t.length;++n)e.push(t.filter(function(t,e){return e!==n}));return{v:e}}();if("object"===(void 0===i?"undefined":o(i)))return i.v}var a=[].concat(t);if(n==t.length)return[a];for(;;){if(a.length===n){e.push(a);break}var s=[a.pop()],u=r(a,n-1),f=void 0;for(f=0;f<u.length;++f)e.push(u[f].concat(s))}return e}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};t.exports=r},8:function(t,n){t.exports=jQuery}});